# 프로세스(Process)의 이해

## 프로세스란 무엇인가?

- 프로세스란 메인 메모리로 이동하여 실행 중인 프로그램을 의미한다.  


## 프로세스의 범위

- 메모리 구조 + 레지스터 Set
- 프로세스 별 독립적인 대상은 프로세스의 범주에 포함시킬 수 있다.


프로세스 생성 시 만들어지는 메모리 구조

![img.png](img.png)

프로세스 생성 시 만들어 지는 메모리 자체를 프로세스라고 표현하기도 한다. 
왜냐하면 프로그램 실행을 위해서 명령어들이 메모리 공간에 올라와 있는 상태이고,
프로그램 실행을 위해서 필요한 메모리 공간이 할당되어 있는 상태이기 때문이다.

위와 같은 메모리 구조는 실행되고 있는 프로세스 개수 만큼 생성된다. 


### Resister Set
프로그램 실행을 위해서는 CPU 내에 존재하는 레지스터들이 절대적으로 필요하다.

CPU를 구성하는 레지스터들은 프로그램 실행을 위해 필요한 데이터들로 채워지게 된다.
따라서 레지스터들의 상태까지도 프로세스의 일부로 포함시켜 말할 수 있다.

# 프로세스의 스케줄링과 상태 변화

## 프로세스의 스케줄링(Scheduling)

CPU 는 하나인데, 여러 프로세스가 실행된다. 
그 이유는 하나의 CPU가 여러 개의 프로세스를 번갈아 가면서 실행하기 때문이다.

결국 우리가 사용하는 멀티 프로세스 운영체제 에서 여러 개의 프로세스가 실행 되는 것 처럼
보이는 이유는 여러 개의 프로세스들이 CPU 할당 시간을 나누기 때문이다.

### `스케줄링`
프로세스의 CPU 할당 순서 및 방법을 결정 짓는 일을 가리켜 스케줄링 이라 한다.

이때 사용되는 알고리즘을 스케줄링 알고리즘이라고 한다.
또한 스케줄링 알고리즘을 적용해서 실제로 프로세스를 관리하는 운영체제 요소(모듈)를 가리켜
스케줄러라고 한다.


## 프로세스의 상태 변화


![img_1.png](img_1.png)

### 상황 1 : S(Start) 에서 Ready 상태로의 전이를 보여준다.

여기서 S는 프로세스가 생성되었음을 의미한다. 프로세는 생성과 동시에
Ready 상태로 들어간다. Ready 상태에 있는 프로세스는 CPU에 의해
실행되기를 희망하는 상태이다. 
여러분은 다음과 같이 생각할 수도 있을 것이다. 

`"아니 ! 프로세스가 생성되었으면, 바로 실행(Running)되어야 하는 것 아닌가?`

그러나 멀티 프로세스 운영체제이기 때문에, 현재 CPU에 의해서 임의의 프로세스가 실행 중에
있을 것이다. 깡패가 아닌 이상 새로운 프로세스가 생성되었다고 해서 현재 실행 중인
프로세스를 무조건 멈추게 할수는 없는 일 아닌가?
스케줄러에 의해서 선택 되기를 바라며, Ready 상태가 되어야 한다.

### 상황 2: Ready 상태에서 Running 상태로의 전이를 보여준다.
Ready 상태에 있는 프로세스들은 스케줄러에 의해서 관리되는 프로세스들이다.
스케줄러는 Ready 상태에 있는 프로세스중 하나를 선택해서 CPU에 의해 실행 될 수 있도록 한다.
물론 스케줄링 알고리즘에 기반을 둘 것이다. 결국 Ready 상태에 있는 프로세스 중 스케줄러에 의해 선택된
프로세스는 Running 상태가 되어 실행되는 것이다.


![img_2.png](img_2.png) 


# 컨텍스트 스위칭(Context Switching)

여러 개의 프로세스들이 CPU 실행시간을 나누는 방식으로 동시 실행되는 효과를 얻고 있고
프로그램 실행의 상당 시간을 I/O 에 소모하기 때문에 둘 이상의 프로세스 실행은 CPU 의 활용도를 
높여 성능 향상까지 가져온다는 결론을 내릴 수 있다. 

하지만 실행 중인 프로세스(Running 상태의 프로세스) 의 변경은 시스템에 많은 부하를 가져다 주기도 한다.

"CPU 내에 존재하는 레지스터들은 현재 실행 중인 프로세스 관련 데이터들로 채워진다."

실행 중인 프로세스가 변경되면 CPU 내에 존재하는 레지스터들의 값이 변경되기 때문이다. 

예를 들어 프로세스 A가 실행 중에 있다. 일정 시간이 지나서 이제 프로세스 B를 실행해야  한다.
그렇다고 프로세스 A의 실행이 완전히 끝난것은 아니다. 잠시 후에 다시 실행되어야 한다.
따라서 프로세스 B가 실행되기 전에 현재 레지스터들이 지니고 있는 데이터들을 어딘가에
저장해야 한다.  이 데이터 들은 프로세스 A가 실행을 이어서 진행할 경우 
필요한 데이터들이기 때문이다. 

"실행 되는 프로세스의 변경과정에서 발생하는 컨텍스트 스위칭은 시스템에 많은 부담을 준다."

이는 레지스터 개수가 많은 시스템 일수록 그리고 프로세스 별로 관릳괴어야 할 데이터 종류가 많을  수록
더하다. 이것이 바로 멀티 프로세스 운영체제의 단점이다. 

따라서 두가지를 동시에 고려해야 한다. 
프로그램 실행과정에서 발생하는 I/O를 고려해보면 , 멀티 프로세스 기반의 프로그램 실행은
많은 부분 성능 향상에 도움이 된다. 하지만 컨텍스트 스위칭이 미치는 영향을 고려할 경우,
오히려 성능에 저하를 가져올 수 도 있다. 성능과 관련된 이 두가지 사항을 결코 잊어서는 안된다.

![img_3.png](img_3.png)


![img_4.png](img_4.png)


# 프로세스의 생성

## 프로세스의 생성